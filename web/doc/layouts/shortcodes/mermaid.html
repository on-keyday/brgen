<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  import * as d3 from 'https://cdn.jsdelivr.net/npm/d3@7.0.0/dist/d3.min.js';
  console.log(d3);
  document.querySelectorAll('pre code').forEach((block) => {
    if (block.classList.contains('language-mermaid')) {
      block.classList.add('mermaid');
    }
  });

  mermaid.initialize({ startOnLoad: true });
 

 
</script>
<script type="module"> 
  
  window.addEventListener('load',()=>{
    setTimeout(()=>{
      const svgs = d3.selectAll(".mermaid svg");
      console.log(svgs);      
      svgs.each(function() {
        const svg = d3.select(this);
        svg.html("<g>" + svg.html() + "</g>");
        const inner = svg.select("g");
        var zoom = d3.zoom().on("zoom", function(target) {
          console.log("zooming");
          console.log(target);
          inner.attr("transform", target.transform);
        });
        svg.call(zoom);
        console.log(svg.html());
      })
    },1000)
  })
 
</script>
