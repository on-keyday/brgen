{"success": true,"files": ["C:/workspace/shbrgen/brgen/example/usb.bgn"],"ast": {"node":[{"node_type":"program","loc":{"pos":{"begin":0,"end":2},"file":1,"line":1,"col":1},"body":{"struct_type":1,"elements":[2,41,51],"global_scope":0}},{"node_type":"struct_type","loc":{"pos":{"begin":0,"end":2},"file":1,"line":1,"col":1},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":0,"fields":[2,41,51],"base":0,"recursive":false,"fixed_header_size":0,"fixed_tail_size":0}},{"node_type":"format","loc":{"pos":{"begin":6,"end":12},"file":1,"line":4,"col":1},"body":{"belong":null,"belong_struct":1,"ident":3,"body":4,"encode_fn":null,"decode_fn":null,"cast_fns":[],"depends":[25],"state_variables":[]}},{"node_type":"ident","loc":{"pos":{"begin":13,"end":22},"file":1,"line":4,"col":8},"body":{"expr_type":null,"constant_level":"unknown","ident":"USBPacket","usage":"define_format","base":2,"scope":0}},{"node_type":"indent_block","loc":{"pos":{"begin":25,"end":29},"file":1,"line":5,"col":1},"body":{"struct_type":5,"elements":[6,9,12,31,37],"scope":1}},{"node_type":"struct_type","loc":{"pos":{"begin":25,"end":29},"file":1,"line":5,"col":1},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":null,"fields":[6,9,12,15,27],"base":2,"recursive":false,"fixed_header_size":16,"fixed_tail_size":0}},{"node_type":"field","loc":{"pos":{"begin":29,"end":33},"file":1,"line":5,"col":5},"body":{"belong":2,"belong_struct":5,"ident":7,"colon_loc":{"pos":{"begin":34,"end":35},"file":1,"line":5,"col":10},"is_state_variable":false,"field_type":8,"arguments":null,"offset_bit":0,"offset_recent":0,"tail_offset_bit":null,"tail_offset_recent":8,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"fixed","eventual_follow":"normal","next":9}},{"node_type":"ident","loc":{"pos":{"begin":29,"end":33},"file":1,"line":5,"col":5},"body":{"expr_type":8,"constant_level":"variable","ident":"sync","usage":"define_field","base":6,"scope":1}},{"node_type":"int_type","loc":{"pos":{"begin":35,"end":37},"file":1,"line":5,"col":11},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":8,"endian":"unspec","is_signed":false,"is_common_supported":true}},{"node_type":"field","loc":{"pos":{"begin":43,"end":46},"file":1,"line":6,"col":5},"body":{"belong":2,"belong_struct":5,"ident":10,"colon_loc":{"pos":{"begin":47,"end":48},"file":1,"line":6,"col":9},"is_state_variable":false,"field_type":11,"arguments":null,"offset_bit":8,"offset_recent":8,"tail_offset_bit":null,"tail_offset_recent":4,"bit_alignment":"bit_4","eventual_bit_alignment":"byte_aligned","follow":"fixed","eventual_follow":"normal","next":12}},{"node_type":"ident","loc":{"pos":{"begin":43,"end":46},"file":1,"line":6,"col":5},"body":{"expr_type":11,"constant_level":"variable","ident":"pid","usage":"define_field","base":9,"scope":1}},{"node_type":"int_type","loc":{"pos":{"begin":48,"end":50},"file":1,"line":6,"col":10},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_4","bit_size":4,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"field","loc":{"pos":{"begin":56,"end":67},"file":1,"line":7,"col":5},"body":{"belong":2,"belong_struct":5,"ident":13,"colon_loc":{"pos":{"begin":68,"end":69},"file":1,"line":7,"col":17},"is_state_variable":false,"field_type":14,"arguments":null,"offset_bit":12,"offset_recent":12,"tail_offset_bit":null,"tail_offset_recent":0,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"normal","eventual_follow":"normal","next":15}},{"node_type":"ident","loc":{"pos":{"begin":56,"end":67},"file":1,"line":7,"col":5},"body":{"expr_type":14,"constant_level":"variable","ident":"pid_reverse","usage":"define_field","base":12,"scope":1}},{"node_type":"int_type","loc":{"pos":{"begin":69,"end":71},"file":1,"line":7,"col":18},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_4","bit_size":4,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"field","loc":{"pos":{"begin":102,"end":107},"file":1,"line":9,"col":5},"body":{"belong":2,"belong_struct":5,"ident":null,"colon_loc":{"pos":{"begin":0,"end":0},"file":0,"line":0,"col":0},"is_state_variable":false,"field_type":16,"arguments":null,"offset_bit":16,"offset_recent":16,"tail_offset_bit":0,"tail_offset_recent":0,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"end","eventual_follow":"end","next":27}},{"node_type":"struct_union_type","loc":{"pos":{"begin":102,"end":107},"file":1,"line":9,"col":5},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":null,"cond":17,"conds":[19],"structs":[22],"base":37,"union_fields":[27],"exhaustive":false}},{"node_type":"identity","loc":{"pos":{"begin":108,"end":111},"file":1,"line":9,"col":11},"body":{"expr_type":11,"constant_level":"variable","expr":18}},{"node_type":"ident","loc":{"pos":{"begin":108,"end":111},"file":1,"line":9,"col":11},"body":{"expr_type":11,"constant_level":"variable","ident":"pid","usage":"reference","base":10,"scope":2}},{"node_type":"identity","loc":{"pos":{"begin":122,"end":128},"file":1,"line":10,"col":9},"body":{"expr_type":11,"constant_level":"constant","expr":20}},{"node_type":"int_literal","loc":{"pos":{"begin":122,"end":128},"file":1,"line":10,"col":9},"body":{"expr_type":21,"constant_level":"constant","value":"0b0001"}},{"node_type":"int_literal_type","loc":{"pos":{"begin":122,"end":128},"file":1,"line":10,"col":9},"body":{"is_explicit":false,"non_dynamic_allocation":false,"bit_alignment":"not_target","bit_size":1,"base":20}},{"node_type":"struct_type","loc":{"pos":{"begin":129,"end":131},"file":1,"line":10,"col":16},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":16,"fields":[23],"base":39,"recursive":false,"fixed_header_size":16,"fixed_tail_size":16}},{"node_type":"field","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"belong":2,"belong_struct":22,"ident":24,"colon_loc":{"pos":{"begin":137,"end":138},"file":1,"line":10,"col":24},"is_state_variable":false,"field_type":25,"arguments":null,"offset_bit":0,"offset_recent":0,"tail_offset_bit":0,"tail_offset_recent":0,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"end","eventual_follow":"end","next":null}},{"node_type":"ident","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"expr_type":25,"constant_level":"variable","ident":"data","usage":"define_field","base":23,"scope":3}},{"node_type":"ident_type","loc":{"pos":{"begin":138,"end":150},"file":1,"line":10,"col":25},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":16,"import_ref":null,"ident":26,"base":44}},{"node_type":"ident","loc":{"pos":{"begin":138,"end":150},"file":1,"line":10,"col":25},"body":{"expr_type":null,"constant_level":"unknown","ident":"StartOfFrame","usage":"reference_type","base":42,"scope":3}},{"node_type":"field","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"belong":null,"belong_struct":5,"ident":28,"colon_loc":{"pos":{"begin":0,"end":0},"file":0,"line":0,"col":0},"is_state_variable":false,"field_type":29,"arguments":null,"offset_bit":null,"offset_recent":0,"tail_offset_bit":null,"tail_offset_recent":0,"bit_alignment":"not_target","eventual_bit_alignment":"not_target","follow":"unknown","eventual_follow":"unknown","next":null}},{"node_type":"ident","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"expr_type":29,"constant_level":"unknown","ident":"data","usage":"define_field","base":27,"scope":4}},{"node_type":"union_type","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"not_target","bit_size":16,"cond":17,"candidates":[30],"base_type":16,"common_type":25,"member_candidates":[]}},{"node_type":"union_candidate","loc":{"pos":{"begin":132,"end":136},"file":1,"line":10,"col":19},"body":{"cond":19,"field":23}},{"node_type":"assert","loc":{"pos":{"begin":82,"end":84},"file":1,"line":8,"col":10},"body":{"cond":32,"is_io_related":false}},{"node_type":"binary","loc":{"pos":{"begin":82,"end":84},"file":1,"line":8,"col":10},"body":{"expr_type":33,"constant_level":"variable","op":"==","left":34,"right":36}},{"node_type":"bool_type","loc":{"pos":{"begin":82,"end":84},"file":1,"line":8,"col":10},"body":{"is_explicit":false,"non_dynamic_allocation":false,"bit_alignment":"not_target","bit_size":null}},{"node_type":"unary","loc":{"pos":{"begin":77,"end":78},"file":1,"line":8,"col":5},"body":{"expr_type":11,"constant_level":"variable","op":"!","expr":35}},{"node_type":"ident","loc":{"pos":{"begin":78,"end":81},"file":1,"line":8,"col":6},"body":{"expr_type":11,"constant_level":"variable","ident":"pid","usage":"reference","base":10,"scope":1}},{"node_type":"ident","loc":{"pos":{"begin":85,"end":96},"file":1,"line":8,"col":13},"body":{"expr_type":14,"constant_level":"variable","ident":"pid_reverse","usage":"reference","base":13,"scope":1}},{"node_type":"match","loc":{"pos":{"begin":102,"end":107},"file":1,"line":9,"col":5},"body":{"expr_type":38,"constant_level":"variable","struct_union_type":16,"cond_scope":2,"cond":17,"branch":[39]}},{"node_type":"void_type","loc":{"pos":{"begin":102,"end":107},"file":1,"line":9,"col":5},"body":{"is_explicit":false,"non_dynamic_allocation":false,"bit_alignment":"not_target","bit_size":null}},{"node_type":"match_branch","loc":{"pos":{"begin":122,"end":128},"file":1,"line":10,"col":9},"body":{"belong":37,"cond":19,"sym_loc":{"pos":{"begin":129,"end":131},"file":1,"line":10,"col":16},"then":40}},{"node_type":"scoped_statement","loc":{"pos":{"begin":129,"end":131},"file":1,"line":10,"col":16},"body":{"struct_type":22,"statement":23,"scope":3}},{"node_type":"format","loc":{"pos":{"begin":156,"end":162},"file":1,"line":13,"col":1},"body":{"belong":null,"belong_struct":1,"ident":42,"body":43,"encode_fn":null,"decode_fn":null,"cast_fns":[],"depends":[],"state_variables":[]}},{"node_type":"ident","loc":{"pos":{"begin":163,"end":175},"file":1,"line":13,"col":8},"body":{"expr_type":null,"constant_level":"unknown","ident":"StartOfFrame","usage":"define_format","base":41,"scope":5}},{"node_type":"indent_block","loc":{"pos":{"begin":178,"end":182},"file":1,"line":14,"col":1},"body":{"struct_type":44,"elements":[45,48],"scope":6}},{"node_type":"struct_type","loc":{"pos":{"begin":178,"end":182},"file":1,"line":14,"col":1},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":16,"fields":[45,48],"base":41,"recursive":false,"fixed_header_size":16,"fixed_tail_size":16}},{"node_type":"field","loc":{"pos":{"begin":182,"end":187},"file":1,"line":14,"col":5},"body":{"belong":41,"belong_struct":44,"ident":46,"colon_loc":{"pos":{"begin":188,"end":189},"file":1,"line":14,"col":11},"is_state_variable":false,"field_type":47,"arguments":null,"offset_bit":0,"offset_recent":0,"tail_offset_bit":5,"tail_offset_recent":5,"bit_alignment":"bit_3","eventual_bit_alignment":"byte_aligned","follow":"fixed","eventual_follow":"end","next":48}},{"node_type":"ident","loc":{"pos":{"begin":182,"end":187},"file":1,"line":14,"col":5},"body":{"expr_type":47,"constant_level":"variable","ident":"frame","usage":"define_field","base":45,"scope":6}},{"node_type":"int_type","loc":{"pos":{"begin":189,"end":192},"file":1,"line":14,"col":12},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_3","bit_size":11,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"field","loc":{"pos":{"begin":198,"end":201},"file":1,"line":15,"col":5},"body":{"belong":41,"belong_struct":44,"ident":49,"colon_loc":{"pos":{"begin":202,"end":203},"file":1,"line":15,"col":9},"is_state_variable":false,"field_type":50,"arguments":null,"offset_bit":11,"offset_recent":11,"tail_offset_bit":0,"tail_offset_recent":0,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"end","eventual_follow":"end","next":null}},{"node_type":"ident","loc":{"pos":{"begin":198,"end":201},"file":1,"line":15,"col":5},"body":{"expr_type":50,"constant_level":"variable","ident":"crc","usage":"define_field","base":48,"scope":6}},{"node_type":"int_type","loc":{"pos":{"begin":203,"end":205},"file":1,"line":15,"col":10},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_5","bit_size":5,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"format","loc":{"pos":{"begin":209,"end":215},"file":1,"line":17,"col":1},"body":{"belong":null,"belong_struct":1,"ident":52,"body":53,"encode_fn":null,"decode_fn":null,"cast_fns":[],"depends":[],"state_variables":[]}},{"node_type":"ident","loc":{"pos":{"begin":216,"end":227},"file":1,"line":17,"col":8},"body":{"expr_type":null,"constant_level":"unknown","ident":"TokenPacket","usage":"define_format","base":51,"scope":7}},{"node_type":"indent_block","loc":{"pos":{"begin":230,"end":234},"file":1,"line":18,"col":1},"body":{"struct_type":54,"elements":[55,58,61],"scope":8}},{"node_type":"struct_type","loc":{"pos":{"begin":230,"end":234},"file":1,"line":18,"col":1},"body":{"is_explicit":false,"non_dynamic_allocation":true,"bit_alignment":"byte_aligned","bit_size":16,"fields":[55,58,61],"base":51,"recursive":false,"fixed_header_size":16,"fixed_tail_size":16}},{"node_type":"field","loc":{"pos":{"begin":234,"end":238},"file":1,"line":18,"col":5},"body":{"belong":51,"belong_struct":54,"ident":56,"colon_loc":{"pos":{"begin":239,"end":240},"file":1,"line":18,"col":10},"is_state_variable":false,"field_type":57,"arguments":null,"offset_bit":0,"offset_recent":0,"tail_offset_bit":9,"tail_offset_recent":9,"bit_alignment":"bit_7","eventual_bit_alignment":"byte_aligned","follow":"fixed","eventual_follow":"end","next":58}},{"node_type":"ident","loc":{"pos":{"begin":234,"end":238},"file":1,"line":18,"col":5},"body":{"expr_type":57,"constant_level":"variable","ident":"addr","usage":"define_field","base":55,"scope":8}},{"node_type":"int_type","loc":{"pos":{"begin":240,"end":242},"file":1,"line":18,"col":11},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_7","bit_size":7,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"field","loc":{"pos":{"begin":248,"end":252},"file":1,"line":19,"col":5},"body":{"belong":51,"belong_struct":54,"ident":59,"colon_loc":{"pos":{"begin":253,"end":254},"file":1,"line":19,"col":10},"is_state_variable":false,"field_type":60,"arguments":null,"offset_bit":7,"offset_recent":7,"tail_offset_bit":5,"tail_offset_recent":5,"bit_alignment":"bit_3","eventual_bit_alignment":"byte_aligned","follow":"fixed","eventual_follow":"end","next":61}},{"node_type":"ident","loc":{"pos":{"begin":248,"end":252},"file":1,"line":19,"col":5},"body":{"expr_type":60,"constant_level":"variable","ident":"endp","usage":"define_field","base":58,"scope":8}},{"node_type":"int_type","loc":{"pos":{"begin":254,"end":256},"file":1,"line":19,"col":11},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_4","bit_size":4,"endian":"unspec","is_signed":false,"is_common_supported":false}},{"node_type":"field","loc":{"pos":{"begin":262,"end":265},"file":1,"line":20,"col":5},"body":{"belong":51,"belong_struct":54,"ident":62,"colon_loc":{"pos":{"begin":266,"end":267},"file":1,"line":20,"col":9},"is_state_variable":false,"field_type":63,"arguments":null,"offset_bit":11,"offset_recent":11,"tail_offset_bit":0,"tail_offset_recent":0,"bit_alignment":"byte_aligned","eventual_bit_alignment":"byte_aligned","follow":"end","eventual_follow":"end","next":null}},{"node_type":"ident","loc":{"pos":{"begin":262,"end":265},"file":1,"line":20,"col":5},"body":{"expr_type":63,"constant_level":"variable","ident":"crc","usage":"define_field","base":61,"scope":8}},{"node_type":"int_type","loc":{"pos":{"begin":267,"end":269},"file":1,"line":20,"col":10},"body":{"is_explicit":true,"non_dynamic_allocation":true,"bit_alignment":"bit_5","bit_size":5,"endian":"unspec","is_signed":false,"is_common_supported":false}}],"scope":[{"owner":0,"ident":[3],"branch":1,"next":5,"prev":null,"branch_root":true},{"owner":2,"ident":[7,10,13,35,36],"branch":2,"next":4,"prev":0,"branch_root":true},{"owner":37,"ident":[18],"branch":3,"next":4,"prev":1,"branch_root":true},{"owner":39,"ident":[24],"branch":null,"next":4,"prev":2,"branch_root":true},{"owner":2,"ident":[28],"branch":null,"next":5,"prev":1,"branch_root":false},{"owner":0,"ident":[42],"branch":6,"next":7,"prev":0,"branch_root":false},{"owner":41,"ident":[46,49],"branch":null,"next":7,"prev":5,"branch_root":true},{"owner":0,"ident":[52],"branch":8,"next":null,"prev":5,"branch_root":false},{"owner":51,"ident":[56,59,62],"branch":null,"next":null,"prev":7,"branch_root":true}]},"error": null}